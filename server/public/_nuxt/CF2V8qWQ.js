import{_ as H}from"./CGGYEFhd.js";import{E as L}from"./DSuzuHr1.js";import{E as P}from"./BruNbhwZ.js";import{E as Z,a as j}from"./BMbyqd4v.js";import{h as J,bu as b,e as K,H as Q}from"./Cr5Ubhxi.js";import{E as W}from"./DkOQWea0.js";import{E as X}from"./DuE7aCnB.js";import{E as Y}from"./lylAQj0-.js";import{E as $,a as h}from"./Dua6tcUZ.js";import{E as ll}from"./BpShNd2i.js";import{E as el}from"./C-cM_-N0.js";import"./DP2rzg_V.js";import"./l0sNRNKZ.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{l as tl,b as ol,c as sl,M as _,N as B,a6 as o,a1 as a,u as t,a0 as g,Z as E,O as n,y as al,a3 as r,ag as d,_ as nl,ao as il}from"./BgewwvAi.js";const dl={class:"pt-[10px]"},ml={class:"w-80"},ul={class:"w-80"},rl={class:"form-tips"},pl={class:"w-80"},_l={class:"mx-7 mt-10"},fl={class:"mx-8 mt-4"},Vl={class:"flex items-center"},vl={class:"flex items-center"},bl={class:"flex items-center"},xl={class:"flex items-center"},kl={class:"flex items-center"},cl={class:"flex items-center"},gl={class:"flex items-center"},El={class:"mx-8 mt-10"},Ul={class:"flex items-center"},wl={class:"w-80"},yl={class:"mx-8 mt-10"},Ql=tl({__name:"search-config",props:{modelValue:{}},emits:["update:modelValue"],setup(C,{emit:S}){const s=J(C,"modelValue",S),m=ol({default:0,range:[0,1],step:.1,tips:""}),D=[{label:"语义检索",value:"similar"},{label:"全文检索",value:"full"},{label:"混合检索",value:"mix"}];return sl(()=>m.value,U=>{console.log(U)}),(U,l)=>{const x=H,i=L,p=P,u=Z,k=j,O=K,T=W,c=X,f=Q,V=Y,A=$,F=h,v=ll,q=el;return _(),B("div",dl,[o(i,{label:"对话模型",prop:"model_id"},{default:a(()=>[n("div",ml,[o(x,{class:"flex-1",id:t(s).model_id,"onUpdate:id":l[0]||(l[0]=e=>t(s).model_id=e),sub_id:t(s).model_sub_id,"onUpdate:sub_id":l[1]||(l[1]=e=>t(s).model_sub_id=e),configs:t(m),"onUpdate:configs":l[2]||(l[2]=e=>al(m)?m.value=e:null),"set-default":!1,disabled:""},null,8,["id","sub_id","configs"])])]),_:1}),o(i,{label:"温度属性",required:"",prop:"temperature"},{default:a(()=>{var e,w,y,z,N,I,M,R;return[n("div",ul,[o(p,{modelValue:t(s).temperature,"onUpdate:modelValue":l[3]||(l[3]=G=>t(s).temperature=G),min:(w=(e=t(m))==null?void 0:e.range)==null?void 0:w[0],max:(z=(y=t(m))==null?void 0:y.range)==null?void 0:z[1],step:.1},null,8,["modelValue","min","max"]),n("div",rl," 输入"+r((I=(N=t(m))==null?void 0:N.range)==null?void 0:I[0])+"-"+r((R=(M=t(m))==null?void 0:M.range)==null?void 0:R[1])+" 之间的数值，支持1位小数点，数值越大回答越随机。 ",1)])]}),_:1}),o(i,{label:"文件解析",prop:"support_file"},{default:a(()=>[n("div",null,[o(k,{modelValue:t(s).support_file,"onUpdate:modelValue":l[4]||(l[4]=e=>t(s).support_file=e)},{default:a(()=>[o(u,{value:1},{default:a(()=>l[21]||(l[21]=[d(" 启用 ")])),_:1}),o(u,{value:0},{default:a(()=>l[22]||(l[22]=[d(" 关闭 ")])),_:1})]),_:1},8,["modelValue"]),l[23]||(l[23]=n("div",{class:"form-tips"},"开启后对话时支持上传文件，需消耗大量token，按需启用",-1))])]),_:1}),o(i,{label:"空搜索回复"},{default:a(()=>[o(k,{modelValue:t(s).search_empty_type,"onUpdate:modelValue":l[5]||(l[5]=e=>t(s).search_empty_type=e)},{default:a(()=>[o(u,{value:1},{default:a(()=>l[24]||(l[24]=[d(" AI回复")])),_:1}),o(u,{value:2},{default:a(()=>l[25]||(l[25]=[d(" 自定义回复")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(s).search_empty_type===2?(_(),g(i,{key:0},{default:a(()=>[n("div",pl,[o(O,{modelValue:t(s).search_empty_text,"onUpdate:modelValue":l[6]||(l[6]=e=>t(s).search_empty_text=e),placeholder:"请输入回复内容，当搜索匹配不上内容时，直接回复填写的内容",type:"textarea",autosize:{minRows:6,maxRows:6},maxlength:1e3,"show-word-limit":"",clearable:""},null,8,["modelValue"])])]),_:1})):E("",!0),n("div",_l,[o(T,{title:"下面的配置除了『引用上下文』其它的只有当智能体关联了知识库才有效!",type:"warning"})]),n("div",fl,[o(c,{"content-position":"left"},{default:a(()=>l[26]||(l[26]=[d("召回设置")])),_:1})]),n("div",null,[o(i,{label:"检索模式",prop:"search_mode"},{label:a(({label:e})=>[n("span",Vl,[d(r(e)+" ",1),o(V,{placement:"top"},{content:a(()=>l[27]||(l[27]=[n("p",null,"语义检索: 采用向量化模型进行向量检索",-1),n("p",null,"全文检索: 使用传统的数据库检索方式检索",-1),n("p",null,"混合检索: 语义检索+全文检索,具有更好的效果,建议搭配重排模型使用。",-1),n("p",null,"注意: 当您使用全文或混合检索时，是没有语义相似度的，建议您开启重排模型",-1)])),default:a(()=>[o(f,{class:"ml-1 cursor-pointer"},{default:a(()=>[o(t(b))]),_:1})]),_:1})])]),default:a(()=>[o(F,{class:"!w-64",modelValue:t(s).search_mode,"onUpdate:modelValue":l[7]||(l[7]=e=>t(s).search_mode=e),placeholder:"请选择搜索模式"},{default:a(()=>[(_(),B(nl,null,il(D,e=>o(A,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),o(i,{label:"引用上限",prop:"search_tokens"},{label:a(({label:e})=>[n("span",vl,[d(r(e)+" ",1),o(V,{placement:"top"},{content:a(()=>l[28]||(l[28]=[n("p",null,"该参数表示单次文档从知识库检索最大的Tokens数量",-1),n("p",null,"说明: 引用越多意味着所需消耗的token越多",-1),n("p",null,"注意: 切记不要超出模型的最大token限制",-1)])),default:a(()=>[o(f,{class:"ml-1 cursor-pointer"},{default:a(()=>[o(t(b))]),_:1})]),_:1})])]),default:a(()=>[n("div",bl,[o(p,{class:"!w-64",modelValue:t(s).search_tokens,"onUpdate:modelValue":l[8]||(l[8]=e=>t(s).search_tokens=e),min:100,max:3e4},null,8,["modelValue"]),o(v,{class:"ml-4",modelValue:t(s).search_tokens,"onUpdate:modelValue":l[9]||(l[9]=e=>t(s).search_tokens=e),min:100,max:3e4},null,8,["modelValue"])])]),_:1}),o(i,{label:"引用上下文",prop:"context_num"},{label:a(({label:e})=>[n("span",xl,[d(r(e)+" ",1),o(V,{placement:"top"},{content:a(()=>l[29]||(l[29]=[n("p",null,"上下文记忆功能，对话时让大模型知道您前 N次 的对话。",-1)])),default:a(()=>[o(f,{class:"ml-1 cursor-pointer"},{default:a(()=>[o(t(b))]),_:1})]),_:1})])]),default:a(()=>[n("div",kl,[o(p,{class:"!w-64",modelValue:t(s).context_num,"onUpdate:modelValue":l[10]||(l[10]=e=>t(s).context_num=e),min:0,max:50,step:1},null,8,["modelValue"]),o(v,{class:"ml-4",modelValue:t(s).context_num,"onUpdate:modelValue":l[11]||(l[11]=e=>t(s).context_num=e),min:0,max:50,step:1},null,8,["modelValue"])])]),_:1}),o(i,{label:"最低相似度",prop:"search_similar"},{label:a(({label:e})=>[n("span",cl,[d(r(e)+" ",1),o(V,{placement:"top"},{content:a(()=>l[30]||(l[30]=[n("p",null,"语义检索的精度，提问检索的内容需要达到该精度才会被引用",-1),n("ol",{class:"list-decimal pl-4"},[n("li",null,"高语义相似度(>=0.8): 会检索相关性高的知识，会更准确，同时也容易未命中。"),n("li",null,"低语义相似度(如0.4): 检索范围更大，更容易匹配知识，但可能回答会不准确。"),n("li",null,"不同的向量模型检索相似度不一样，具体情况到 『知识库 - 搜索测试』进行调试。"),n("li",null,"如果您使用的是『全文检索/混合检索』这个值则不会生效，仅对语义检索有效。")],-1)])),default:a(()=>[o(f,{class:"ml-1 cursor-pointer"},{default:a(()=>[o(t(b))]),_:1})]),_:1})])]),default:a(()=>[n("div",gl,[o(p,{class:"!w-64",modelValue:t(s).search_similar,"onUpdate:modelValue":l[12]||(l[12]=e=>t(s).search_similar=e),size:"small",disabled:t(s).search_mode!=="similar",min:0,max:1,step:.001},null,8,["modelValue","disabled"]),o(v,{class:"ml-4",modelValue:t(s).search_similar,"onUpdate:modelValue":l[13]||(l[13]=e=>t(s).search_similar=e),disabled:t(s).search_mode!=="similar",min:0,max:1,step:.001},null,8,["modelValue","disabled"])])]),_:1})]),n("div",El,[o(c,{"content-position":"left"},{default:a(()=>l[31]||(l[31]=[d("重排设置")])),_:1})]),n("div",null,[o(i,{label:"重排开关"},{default:a(()=>[n("div",null,[o(k,{modelValue:t(s).ranking_status,"onUpdate:modelValue":l[14]||(l[14]=e=>t(s).ranking_status=e)},{default:a(()=>[o(u,{value:0},{default:a(()=>l[32]||(l[32]=[d(" 关闭")])),_:1}),o(u,{value:1},{default:a(()=>l[33]||(l[33]=[d(" 启用")])),_:1})]),_:1},8,["modelValue"]),l[34]||(l[34]=n("div",{class:"form-tips"}," 开启后，则会对从数据库检索的内容进行重新排序(取分数最高的N条数据作为引用) ",-1))])]),_:1}),t(s).ranking_status===1?(_(),g(i,{key:0,label:"重排分数"},{default:a(()=>[n("div",null,[n("div",Ul,[o(p,{class:"!w-64",modelValue:t(s).ranking_score,"onUpdate:modelValue":l[15]||(l[15]=e=>t(s).ranking_score=e),size:"small",min:0,max:1,step:.001},null,8,["modelValue"]),o(v,{class:"ml-4",modelValue:t(s).ranking_score,"onUpdate:modelValue":l[16]||(l[16]=e=>t(s).ranking_score=e),min:0,max:1,step:.001},null,8,["modelValue"])]),l[35]||(l[35]=n("div",{class:"form-tips"}," 表示如果数据重排后，分数没有达到该值则会过滤掉。 ",-1))])]),_:1})):E("",!0),t(s).ranking_status===1?(_(),g(i,{key:1,label:"重排模型",prop:"vl_models"},{default:a(()=>[n("div",wl,[o(x,{class:"flex-1",type:"rankingModels",id:t(s).ranking_model,"onUpdate:id":l[17]||(l[17]=e=>t(s).ranking_model=e),"set-default":!1},null,8,["id"])])]),_:1})):E("",!0)]),n("div",yl,[o(c,{"content-position":"left"},{default:a(()=>l[36]||(l[36]=[d("问题优化")])),_:1})]),n("div",null,[o(i,{label:"问题优化",prop:"optimize_ask"},{default:a(()=>[n("div",null,[o(q,{modelValue:t(s).optimize_ask,"onUpdate:modelValue":l[18]||(l[18]=e=>t(s).optimize_ask=e),"active-value":1,"inactive-value":0},null,8,["modelValue"]),l[37]||(l[37]=n("div",{class:"form-tips"}," 综合历史记录和问题, 多维度的生成相似问题, 可增加知识库检索时的精准度。 ",-1))])]),_:1}),o(i,{label:"优化模型",prop:"optimize_m_id"},{default:a(()=>[o(x,{class:"!w-64",id:t(s).optimize_m_id,"onUpdate:id":l[19]||(l[19]=e=>t(s).optimize_m_id=e),sub_id:t(s).optimize_s_id,"onUpdate:sub_id":l[20]||(l[20]=e=>t(s).optimize_s_id=e),"set-default":!1,type:"chatModels",disabled:!1},null,8,["id","sub_id"])]),_:1})])])}}});export{Ql as _};
