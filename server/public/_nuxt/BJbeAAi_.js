import{l as te,j as P,r as z,b as L,ai as j,M as i,N as d,a6 as r,a1 as m,O as s,a7 as q,u as n,a0 as b,Z as _,a8 as se,aG as ae,_ as R,ao as ne,$ as A,a3 as E,a2 as re,ag as ie,aH as le}from"./BgewwvAi.js";import{_ as ce}from"./CyY3lptK.js";import{E as pe}from"./lylAQj0-.js";import{E as de}from"./CkULAG1b.js";import{W as me}from"./DTWQygFP.js";import{l as ue,j as _e,cH as fe,c$ as ge,H as we,E as ye,bC as N,bH as ve}from"./Cr5Ubhxi.js";import{E as xe,a as he}from"./DLQfD3Uz.js";import{E as ke}from"./BamfvPxi.js";import"./l0sNRNKZ.js";/* empty css        *//* empty css        *//* empty css        */import{u as W}from"./BflNLQ2W.js";import{a as Ce,d as Pe}from"./CJgd20ip.js";import{a as be}from"./DjwCd26w.js";import{e as Ee}from"./ClOxl2Zy.js";import{I as Se}from"./Bo6iQvko.js";import Ve from"./x9gaRslC.js";import{_ as Be}from"./DlAUqK2U.js";import"./DCTLXrZ8.js";import"./Ca-AvAta.js";import"./DkD6xkHx.js";import"./BN2uy5AJ.js";import"./DuE7aCnB.js";import"./B-UECF4z.js";import"./CSNrKBDo.js";import"./Cp1klw-J.js";import"./vqJmiX2Z.js";/* empty css        *//* empty css        *//* empty css        */import"./C91Hnkfk.js";import"./Cljthsfj.js";import"./BK9TZFpY.js";const Ie={class:"flex-1 min-h-0 mx-[16px] relative"},$e=["onClick"],De={class:"flex-1 min-h-[70vh] overflow-hidden mx-auto"},ze=["infinite-scroll-disabled"],Le={class:"image-payload h-full w-full relative text-sm"},je={class:"image-bg"},qe=["onClick"],Re=["onClick"],Ae={class:"text-center leading-[38px]"},Ne={class:"image-content"},We=["onClick"],He={class:"flex justify-between mt-[10px]"},Oe={class:"flex items-center"},Te={class:"text-[#BBBBBB] ml-[6px] w-[80px] truncate"},Fe=["onClick"],Me={key:1,class:"flex justify-center items-center mt-[50px]"},Ge={class:"flex flex-col justify-center items-center w-full h-[60vh]"},Ke=te({__name:"draw",props:{keyword:{}},async setup(H){let l,f;const O=H;ue();const g=_e(),S=P(null),V=P(null),c=z({page_no:0,page_size:20,keyword:"",category_id:""}),T={4e3:{rowPerView:7},2e3:{rowPerView:6},1800:{rowPerView:5},1600:{rowPerView:5},1440:{rowPerView:4},1360:{rowPerView:4},1280:{rowPerView:4},1024:{rowPerView:3}},a=z({more:!0,count:0,loading:!1,lists:[]}),B=L(0),w=L([]),{data:I}=([l,f]=j(()=>W(()=>be({type:ge.DRAW}),{default(){return[]},transform(o){return[{id:"",name:"全部"}].concat(o)},lazy:!0},"$SQjM9OqPT4")),l=await l,f(),l);[l,f]=j(()=>W(()=>h(),{lazy:!0},"$E2KxCY8C7W")),await l,f();const h=async()=>{if(!a.loading){if(a.more)c.page_no+=1;else return;a.loading=!0;try{const o=await Ce(c),{lists:t,page_no:v,page_size:k,count:x}=o;v*k>x&&(a.more=!1),v==1?a.lists=t:a.lists=[...a.lists,...t]}finally{setTimeout(()=>a.loading=!1,200)}}},y=()=>{c.page_no=0,a.more=!0,h()},F=async o=>{if(!g.isLogin){g.toggleShowLogin(!0);return}await Pe({records_id:o.id,status:o.is_collect?0:1}),c.category_id===0?y():o.is_collect=o.is_collect?0:1},M=o=>{if(!g.isLogin){g.toggleShowLogin(!0);return}V.value.open(o)},G=P(),K=o=>{G.value=o,console.log(o)},$=o=>{var t;B.value=o,c.category_id=(t=I.value[o])==null?void 0:t.id,y()};return $(0),fe(()=>O.keyword,o=>{c.keyword=o,y()},{debounce:500}),(o,t)=>{const v=le,k=ae,x=ce,Q=pe,U=de,Y=me,Z=we,J=xe,X=ye,ee=he,oe=ke;return i(),d("div",Ie,[r(k,{slidesPerView:"auto",spaceBetween:16,class:"category-lists",onSwiper:K,style:{padding:"10px 0"}},{default:m(()=>[(i(!0),d(R,null,ne(n(I),(e,u)=>(i(),b(v,{key:e.id,style:{width:"auto","margin-right":"12px"}},{default:m(()=>[Object.keys(e).includes("name")?(i(),d("div",{key:0,class:A(["category-item bg-white",{"is-active":n(B)===u}]),onClick:C=>$(u)},E(e.name),11,$e)):_("",!0)]),_:2},1024))),128))]),_:1}),s("div",De,[q((i(),d("div",{class:"model-lists mb-[10px] mx-[0px]","infinite-scroll-distance":"50","infinite-scroll-delay":200,"infinite-scroll-disabled":!n(a).more},[n(a).lists.length?(i(),b(Y,{key:0,ref_key:"waterFull",ref:S,delay:100,list:n(a).lists,width:305,gutter:20,animationDelay:0,animationDuration:0,backgroundColor:"none",animationPrefix:"none",animated:"none",animationEffect:"none",breakpoints:T},{item:m(({item:e})=>{var u,C;return[s("div",Le,[s("div",je,[r(Se,{thumbnail:e.thumbnail,image:(e==null?void 0:e.image)||(e==null?void 0:e.image_url),onRefresh:t[0]||(t[0]=p=>{var D;return(D=n(S))==null?void 0:D.renderer()}),onOnClick:t[1]||(t[1]=p=>w.value=p)},null,8,["thumbnail","image"])]),s("div",{class:"image-praise relative",onClick:p=>F(e)},[s("div",{class:A(["praise-animate",e.is_collect?"praise-entry":"praise-leave"])},null,2)],8,qe),r(Q,{effect:"dark",content:"生成海报",placement:"top"},{default:m(()=>[s("div",{class:"image-poster relative",onClick:re(p=>M(e),["stop"])},[s("div",Ae,[r(x,{size:"16px",color:"#ffffff",name:"el-icon-Picture"})])],8,Re)]),_:2},1024),s("div",Ne,[s("p",{class:"text-white line-clamp-2",onClick:p=>("copy"in o?o.copy:n(N))(e.prompt)},E((e==null?void 0:e.prompts_cn)||(e==null?void 0:e.original_prompts.prompt)),9,We),s("div",He,[s("div",Oe,[(u=e==null?void 0:e.user_info)!=null&&u.image?(i(),d(R,{key:0},[r(U,{size:28,src:(C=e==null?void 0:e.user_info)==null?void 0:C.image},null,8,["src"]),s("p",Te,E(e.user_info.name),1)],64)):_("",!0)]),s("div",{class:"flex items-center",onClick:p=>("copy"in o?o.copy:n(N))(e.prompts)},[r(x,{name:"el-icon-Copy"}),t[3]||(t[3]=s("p",{class:"text-white ml-[6px]"}," 复制 ",-1))],8,Fe)])])])]}),_:1},8,["list"])):_("",!0),n(a).loading?(i(),d("div",Me,[r(Z,{size:"25",class:"is-loading"},{default:m(()=>[r(n(ve))]),_:1}),t[4]||(t[4]=s("span",{class:"mt-[4px] ml-[10px] text-[#999999]"},"加载中...",-1))])):_("",!0),q(s("div",Ge,[r(J,{class:"w-[200px] h-[200px]",src:n(Ee)},null,8,["src"]),t[6]||(t[6]=s("div",{class:"text-tx-regular mb-4"},"当前选择暂无绘画～",-1)),r(X,{type:"primary",onClick:y},{default:m(()=>t[5]||(t[5]=[ie(" 点击刷新")])),_:1})],512),[[se,!n(a).lists.length&&!n(a).loading]])],8,ze)),[[oe,h]]),r(Ve,{ref_key:"posterPopupRef",ref:V},null,512),n(w).length?(i(),b(ee,{key:0,"url-list":n(w),"hide-on-click-modal":!0,onClose:t[2]||(t[2]=e=>w.value=[])},null,8,["url-list"])):_("",!0)])])}}}),Bo=Be(Ke,[["__scopeId","data-v-c481d2de"]]);export{Bo as default};
